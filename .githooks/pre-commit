#!/bin/bash

echo "Running pre-commit checks..."

# Check license headers on staged files
./scripts/license-header.sh check-staged || {
    echo "Error: License headers missing or outdated in staged files"
    echo "Please fix with 'make license-fix', then re-stage files"
    exit 1
}

# Format code
make fmt > /dev/null 2>&1 || {
    echo "Error: Code formatting failed"
    exit 1
}

# Run linter on staged changes
make lint-staged || {
    echo "Error: Linting failed on staged changes"
    echo "Please fix the linting issues before committing"
    exit 1
}

echo "Pre-commit checks passed"
exit 0
