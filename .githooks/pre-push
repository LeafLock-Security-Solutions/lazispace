#!/bin/bash

echo "Running pre-push checks..."

# Check if there are any Go test files
if ! find . -name "*_test.go" -type f 2>/dev/null | grep -q .; then
    echo "No test files found, skipping tests"
    exit 0
fi

# Run tests
echo "Running tests..."
make test
if [ $? -ne 0 ]; then
    echo "Error: Tests failed"
    echo "Fix the tests or use 'git push --no-verify' to skip"
    exit 1
fi

echo "Pre-push checks passed"
exit 0
